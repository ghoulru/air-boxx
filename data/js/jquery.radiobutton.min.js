(function($){$.fn.radioButton=function(_options,callback){var options=$.extend({button:".radio",label:"label",checked:"checked",dataName:"text",buttonHover:"hover"},_options);return this.each(function(){var self=$(this);var radioBtn=self.find(options.button);rbHover(radioBtn);if(options.label!=null){var radioLabel=self.find(options.label);rbHover(radioLabel)}var realInput=radioBtn.find("input");realInput.hide();var inputType=realInput.attr("type");var inputName=realInput.attr("name");var inputValue=realInput.val();var inputData=realInput.data(options.dataName);function rbHover(obj){obj.hover(function(){radioBtn.addClass(options.buttonHover)},function(){radioBtn.removeClass(options.buttonHover)})}radioLabel.on("click",function(e){var btn;e.stopImmediatePropagation();e.preventDefault();if(e.btn!=undefined)btn=e.btn;else btn=radioBtn;toggleCheck(btn)});radioBtn.on("click",function(e){e.stopImmediatePropagation();e.preventDefault();radioLabel.trigger({type:"click",btn:$(this)})});function toggleCheck(button){var isChecked=realInput.is(":checked");console.clear();console.log("toggleCheck > isChecked="+isChecked+" / inputType="+inputType);var result=null;if(inputType=="radio"){if(!isChecked){$("input[name="+inputName+"]").each(function(){$(this).parent(options.button).removeClass(options.checked)});radioBtn.addClass(options.checked);realInput.prop("checked",true);result=true}}else{result=!isChecked;if(isChecked)radioBtn.removeClass(options.checked);else radioBtn.addClass(options.checked);realInput.prop("checked",!isChecked)}cb(result);return result}function cb(isChecked){if(typeof callback=="function"){var cbData={name:inputName,value:inputValue,type:inputType,checked:isChecked,self:self};cbData[options.dataName]=inputData;callback(cbData)}}})}})(jQuery);